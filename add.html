<!DOCTYPE html>
<html lang="en">
<head>
	<link href="./favicon.ico" rel="shortcut icon" />
	<meta charset="UTF-8">
	<title>gsp management system</title>
	  <link href="./bootstrap/css/bootstrap.min.css" rel="stylesheet">
	  <link href="./bootstrap/css/bootstrap-dialog.min.css" rel="stylesheet">
	  <!-- Custom styles for this template -->
	  <link href="./css/dashboard.css" rel="stylesheet">
	  <link href="./bootstrap/css/bootstrap-datetimepicker.min.css" rel="stylesheet">
	  <!--add my style-->
	  <link href="./css/style.css" rel="stylesheet">
	  <!--add jquery UI-->
	  <link href="./bootstrap/jquery-ui/css/custom-theme/jquery-ui-1.10.0.custom.css" rel="stylesheet">
	  <link href="./css/bootstrap-treeview.css" rel="stylesheet">
</head>
<body>
	<!--header start-->
		<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">丽博通医药管理系统</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-left">
            <li><a href="./index.html">财务管理</a></li>
            <li ><a href="./index.html">库存管理</a></li>
            <li><a href="#">GSP管理</a></li>
            <li><a href="#">销售管理</a></li>
            <li><a href="#">客户管理</a></li>
            <li><a href="#">个人信息管理</a></li>
            <li><a href="#">供应商管理</a></li>
            <li><a href="#">采购管理</a></li>
            <li><a href="#">系统管理</a></li>
          </ul>
           <ul class="nav navbar-nav navbar-right">
           	<li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">设置<b class="caret"></b></a>
            	<ul class="dropdown-menu myMenu">
					<li><a href="">退出</a></li>
					<li><a href="">修改密码</a></li>
					<li><a href="">切换用户</a></li>
				</ul>
            </li>
            
            <li><a href="#">admin 欢迎您！</a></li>
            
          </ul>
          <!-- <form class="navbar-form navbar-right">
            <input type="text" class="form-control" placeholder="Search...">
          </form> -->
        </div>
      </div>
    </div>
<!--header end-->
<!--left start-->
	<div class="col-sm-2 col-md-2 sidebar">
		  <label for="treeview"></label>
		  <div id="treeview"></div>
   </div>
<!--left end-->
<!--main start-->
	<div class="col-sm-9 col-sm-offset-4 col-md-10 col-md-offset-2 main">
		
	   <ul class="breadcrumb" contenteditable="true">
		     <li><a href="#">库存管理</a> <span class="divider">/</span></li>
		     <li><a href="#">库存信息</a> <span class="divider">/</span></li>
		     <li><a href="#">入库登记/复核</a><span class="divider">/</span></li> 
		     <li class="active">添加</li>
	   </ul>
   		<h3>入库登记添加</h3>
   		<form class="form-horizontal form-line clearfix" role="form">
	   		<div class="col-md-3">
	   			<div class="input-group">
				  <span class="input-group-addon">验收单编码</span>
				  <label class="form-control form-control-floor">
					  <input type="text" class="form-control" placeholder="">
					  <input type="text" class="form-control form-control-floor2"  placeholder="" readonly>
				  </label>
				</div>
	   		</div>
	   		<div class="col-md-3">
	   			<div class="input-group">
				  <span class="input-group-addon">入库类型</span>
				  <select class="form-control">
				  	<option value="1">采购入库</option>
				  	<option value="2">销退入库</option>
				  </select>
				</div>
	   		</div>
	   		<div class="col-md-3">
	   			<div class="input-group dropdown lbdropdown">
	   				<span class="input-group-addon">订单编号</span>
			        <input class="form-control data-test" name="data-test" id="data-test" />
			        <div class="table-responsive table-wrap" id="table-responsive1">
			        </div>
			    </div>
	   		</div>
	   		<div class="col-md-3">
	   			<div class="input-group">
				  <span class="input-group-addon">发票内容</span>
				  <select class="form-control">
				  	<option value="1">完整</option>
				  	<option value="0">不完整</option>
				  </select>
				</div>
	   		</div>
	   		<div class="col-md-3">
	   			<div class="input-group">
				  <span class="input-group-addon">运输方式</span>
				  <select class="form-control">
				  	<option value="1">陆运</option>
				  	<option value="2">空运</option>
				  	<option value="3">海运</option>
				  	<option value="4">中铁快运</option>
				  </select>
				</div>
	   		</div>
	   		<div class="col-md-3">
	   			<div class="input-group">
				  <span class="input-group-addon">运输温度</span>
				  <input type="text" class="form-control" placeholder="">
				</div>
	   		</div>
	   		<div class="col-md-3">
	   			<div class="input-group">
				  <span class="input-group-addon">入库负责人</span>
				  <input type="text" class="form-control" placeholder="">
				</div>
	   		</div>
	   		<div class="col-md-3">
	   			<div class="input-group">
				  <span class="input-group-addon">品种数量</span>
				  <select class="form-control">
				  	<option value="1">一致</option>
				  	<option value="0">不一致</option>
				  </select>
				</div>
	   		</div>
	   		<div class="col-md-3">
	   			<div class="input-group">
				  <span class="input-group-addon">药品数量</span>
				  <select class="form-control">
				  	<option value="1">一致</option>
				  	<option value="0">不一致</option>
				  </select>
				</div>
	   		</div>
	   		
	   		<div class="col-md-3">
	   			<div class="input-group">
				  <span class="input-group-addon">帐套编码</span>
				  <input type="text" class="form-control" placeholder="">
				</div>
	   		</div>
	   		<div class="col-md-3">
	   			<div class="input-group">
	   				<span class="input-group-addon">验货时间</span>
					<div class="input-append input-append-sm date form_datetime" data-date="2013-02-21T15:25:00Z">
						<input size="16" class="form-control" type="text" value="">
						<span class="add-on"><i class="icon-remove"></i></span>
						<span class="add-on"><i class="icon-calendar"></i></span>
					</div>
				</div>
	   		</div>
	   		<div class="col-md-3">
	   			<div class="input-group ">
				  <span class="input-group-addon">商品总金额</span>
				  <input type="text" class="form-control" placeholder="">
				</div>
	   		</div>
	   		<div class="col-md-12">
	   			<div class="input-group">
				  <span class="input-group-addon">验收结论</span>
					<textarea class="form-control" rows="3"></textarea>
				</div>
	   		</div>
   		</form>
   		<div class="col-md-12" id="plusTable">
   		</div>
	</div>
		<div class="col-md-12">
			<a type="button" class="btn btn-primary" href='./index.html'>暂存</a>
			<a type="button" class="btn btn-primary" href='./index.html'>提交</a>
		</div>
<!--main end-->
</body>
 	 <!-- jQuery-->
	 <script src="./js/jquery-1.8.3.min.js"></script>
	 <!-- Bootstrap core js -->
	 <script src="./bootstrap/js/bootstrap.min.js"></script>
	 <script src="./bootstrap/js/docs.min.js"></script>
	 <script src="./bootstrap/js/bootstrap-datetimepicker.min.js"></script>
	 <script src="./bootstrap/js/bootstrap-datetimepicker.fr.js"></script>
	 <script src="./bootstrap/js/bootstrap-dialog.min.js"></script>
	 <script src="./bootstrap/jquery-ui/js/jquery-ui-1.9.2.custom.min.js"></script>
	 <script src="./js/left-tree.js"></script>
	 <!-- Just for debugging purposes. Don't actually copy this line! -->
	  <!--[if lt IE 9]><script src="../../resources/bootstrap/js/ie8-responsive-file-warning.js"></script><![endif]-->

	  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
	  <!--[if lt IE 9]>
	    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
	    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
	  <![endif]-->
	  <script src="./js/bootstrap-treeview.js"></script>	
	  <!--add table and drop down-->
	  <script type="text/javascript">
			 $().ready(function(){
				 //drop down a table
				 function createTable(obj, val){
	                var html = '';
	                html = html + '<table class="table table-bordered table-hover table-striped table-condensed table-striped2">';
	                html = html + '<tr class="form-group">';
	                for(var i in obj[0]){
	                    html = html + '<th>' + i + '</th>';
	                };
	                html = html + '</tr>';
	                for(var i = 0 ; i < obj.length; i++){
	                    html = html + '<tr class="form-group">';
	                        for(var j in obj[i]){
	                            if(j == val){
	                                html = html + '<td class="key">' + obj[i][j] +'</td>';
	                            }else{
	                                html = html + '<td>' + obj[i][j] +'</td>';
	                            }
	                        }
	                    html = html + '</tr>';
	                }
	                html = html + '</table>';
	                return html;
	            }
				//and add a table name of product
				function printAll(obj){
			      var html = '';
		       	  html = html + '<h3>商品明细</h3>';
		       	  html = html + '<div class="table-responsive" id="table-responsive">';
			      html = html + '<span class="ui-icon ui-icon-plusthick flo" id="plusthick">';
			      html = html + '</span>';
			      html = html + '<span class="ui-icon ui-icon-minusthick" id="minusthick">';
			      html = html + '</span>';
			      html = html + '<table class="table table-bordered table-hover table-striped table-condensed" id="table1">';
			      html = html + '<thead>';
			      html = html + '<tr>';
			      html = html + '<th>';
			      html = html + '<input type="checkbox" id="all"/>';
			      html = html + '</th>';
			      for(var i in obj[0]){
			          html = html + '<th>' + i + '</th>';
			      };
			      html = html + '</tr>';
			      html = html + '</thead>';
			      html = html + '<tbody>';
			      for(var i = 0 ; i < obj.length; i++){
			          html = html + '<tr class="form-group">';
			          html = html + '<td>'+"<input type=checkbox value='' name='chkItem'/>"+'</td>';
			          for(var j in obj[i]){
			        	  if(j =="批号" || j=="实际数量" || j=="拆零数量" || j=="货位（仓位）号"){
			        		  html = html + '<td>' + "<input type=text class='form-control' value='"+obj[i][j]+"' >"+'</td>';
			        	  } else if (j=="生产日期" || j=="有效期"){
			        		  html = html + '<td>' + "<input type=text class='form-control form_datetime' value='"+obj[i][j]+"' >"+'</td>';
			        	  } else {
			        		  html = html + '<td>' + "<input type=text readonly='readonly' class='form-control' value='"+obj[i][j]+"' >"+'</td>';
			        	 }
			          }
			          html = html + '</tr>';
			      }
			      html = html + '</tbody>';
			      html = html + '</table>';
			      html = html + '</div>';
			      return html;
			  };
			  
				 
		        function showTable(){
			        var date = new Date();
					$.getJSON('./js/data.json'+'?'+date, function(response, status, xhr){
				      var data = printAll(response);
				      $('#plusTable').html(data);
				  	});
		        };
		        <!--dropdown a table on data.json -->
		        $('.lbdropdown').click(function(event, val){
		        	var val = 'listprice';
	                $('.table-wrap').is(':visible') ? $('.table-wrap').hide() : $('.table-wrap').show();
	                var date = new Date();
	                $.getJSON('./js/data1.json' +'?'+date, function(resp, status, xhr){
	                    var data = createTable(resp, val);
	                    $('#table-responsive1').html(data);
	                    $('.table-wrap').find('td').on('click', function(event){
	                    	event.stopPropagation();
	    	                $('.table-wrap').is(':visible') ? $('.table-wrap').hide() : $('.table-wrap').show();
	    	                var stateReady = false;
	                        var text = $(this).parent('tr').find('.key').text();
	                        $('.lbdropdown').find('.form-control').val(text);
	                        stateReady = true;
	                        setTimeout(function(){
                        		showTable();
                        	},500);
	                    });
	                });
	            });
				
		    });
			//datetime
			$(".form_datetime").datetimepicker({
				format: "yyyy-MM-dd - hh:ii",
				autoclose: true,
				todayBtn: true,
				startDate: "2014-01-01 10:00",
				minuteStep: 10
			});
			
			//add row
			$('#plusthick').live('click', function(){
				var $clone = $('#table1').find('.form-group:last').clone(true);
				if($clone.length != 0){
					$clone.find('.form-control').removeAttr('readonly').attr('value', '');
				}else{
					var len = $('#table1').find('th').length;
					var clone = '<tr class="form-group"></tr>';
					$clone = $(clone);
					for(var i = 0 ;i < len; i ++){
						$clone.append('<td class=""><input type="text" value="" class="form-control"></td>')
					}
				}
				$('#table1').append($clone);
			});
			
			//delete row
			$('#minusthick').live('click', function(){
				$('#table1 td').find(':checkbox').each(function(index, ele){
					$(this).is(':checked') ? $(this).parents('tr').remove() : null;
				});
			});
			
			$("#all").live("click",function(e){ 
			 	if($(this).is(":checked")){
		     		$("input[name = chkItem]:checkbox").prop("checked", true);
			 	}else{
			 		$("input[name = chkItem]:checkbox").prop("checked", false);
			 	}	 	
			}); 
		</script> 
</html>
